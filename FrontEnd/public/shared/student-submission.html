<!DOCTYPE html>
<html lang="en" x-data="adminStudentSubmissions()" x-init="init()">

<head>
  <meta charset="UTF-8" />
  <title>Student Submissions</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
</head>

<body class="bg-gray-100 text-gray-800">
  <div id="sidebar-placeholder"></div>
  <div class="md:ml-64 p-6 space-y-6">
    <div id="navbar-placeholder"></div>

    <h1 class="text-2xl font-bold">ðŸ“Š Submissions for <span x-text="studentName"></span></h1>

    <div class="bg-white p-4 rounded shadow">
      <table class="w-full table-auto text-sm">
        <thead class="bg-gray-100">
          <tr>
            <th class="text-left p-2">Title</th>
            <th class="text-left p-2">Score</th>
            <th class="text-left p-2">Submitted At</th>
            <th class="text-left p-2">Feedback</th>
            <th class="text-left p-2">Action</th>
          </tr>
        </thead>
        <tbody>
          <template x-for="submission in submissions" :key="submission.id">
            <tr class="border-t hover:bg-gray-50">
              <td class="p-2" x-text="submission.title"></td>
              <td class="p-2" x-text="submission.totalScore + '%'"></td>
              <td class="p-2" x-text="new Date(submission.submittedAt).toLocaleString()"></td>
              <td class="p-2" x-text="submission.feedBack || 'N/A'"></td>
              <td class="p-2">
                <a :href="`/public/shared/view-submission-answers.html?id=${submission.id}`"
                  class="text-indigo-600 hover:underline text-sm">View Result</a>
              </td>
            </tr>
          </template>

          <tr x-show="submissions.length === 0">
            <td colspan="5" class="p-4 text-center text-gray-500">No submissions found.</td>
          </tr>
        </tbody>
      </table>
      <div class="flex justify-center items-center space-x-2 mt-4">
        <!-- Previous -->
        <button @click="changePage(currentPage - 1)" :disabled="!hasPreviousPage"
          class="px-3 py-1 bg-gray-200 rounded disabled:opacity-50">
          Previous
        </button>
      
        <!-- Page Numbers -->
        <template x-for="page in pages()" :key="page">
          <button @click="changePage(page)" class="px-3 py-1 rounded"
            :class="page === currentPage ? 'bg-indigo-500 text-white' : 'bg-gray-200 hover:bg-gray-300'">
            <span x-text="page"></span>
          </button>
        </template>
      
        <!-- Next -->
        <button @click="changePage(currentPage + 1)" :disabled="!hasNextPage"
          class="px-3 py-1 bg-gray-200 rounded disabled:opacity-50">
          Next
        </button>
      </div>

    </div>
  </div>

  <script src="/public/assets/js/shared/student-submissions.js">
    
  </script>
</body>

</html>